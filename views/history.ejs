<!DOCTYPE html>
<html lang="ko">

<head>
    <title>DNA</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="DNA project">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="/styles/bootstrap4/bootstrap.min.css">
    <link href="/plugins/font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" type="text/css" href="/plugins/OwlCarousel2-2.2.1/owl.carousel.css">
    <link rel="stylesheet" type="text/css" href="/plugins/OwlCarousel2-2.2.1/owl.theme.default.css">
    <link rel="stylesheet" type="text/css" href="/plugins/OwlCarousel2-2.2.1/animate.css">
    <link rel="stylesheet" type="text/css" href="/styles/product.css">
    <link rel="stylesheet" type="text/css" href="/styles/product_responsive.css">
    <script src="/js/jquery-3.2.1.min.js"></script>

    <style>
        .container {
            margin: 15px 0 25px;
            padding-top: 6px;
            width: 659px;
        }

        .container .r_name {
            background: none repeat scroll 0 0 #FFFFFF;
            font-size: 13px;
            font-weight: bold;
        }

        .container .wrap {
            padding-bottom: 3px;
            width: 659px;
        }

        .container table {
            border-left: 1px solid #CCCCCC;
            border-right: 1px solid #CCCCCC;
            float: left;
        }

        .container td {
            border-top: 1px solid #CCCCCC;
            border-bottom: 1px solid #CCCCCC;
            color: #333333;
            font: 13px/20px arial;
            padding: 5px 10px;
        }
    </style>
</head>

<body>
    <% var select = "ALL"; %>
    <div class="container">
        <h3 style="text-align: center; color: black">판매자 정보</h3>
            <select id="docType" style="float: right" onchange="typeChange(this)">
                <option value="ALL">전체</option>
                <option value="TRANSACTION">거래이력</option>
                <option value="REPORT">신고이력</option>
                </select><br><br>
            <script>
                function typeChange(e) {
                    var target = document.getElementById("docType");

                    if(target.options[target.selectedIndex].value == "ALL") {
                        <% select = "ALL"; %>
                        console.log('<%-select%>');
                    }
                    else if(target.options[target.selectedIndex].value == "TRANSACTION") {
                        <% select = "TRANSACTION"; %>
                        console.log('<%-select%>');
                    }
                    else if(target.options[target.selectedIndex].value == "REPORT") {
                        <% select = "REPORT"; %>
                        console.log('<%-select%>');
                    }
                console.log('<%-select%>');
                    
                }
            </script>
        <div class="wrap">
            <table cellspacing="0" cellpadding="0" border="0" width="659">
                <tbody>
                    <tr>
                        <td class="r_name">일시</td>
                        <td class="r_name">판매자 ID</td>
                        <td class="r_name">구매자 ID</td>
                        <td class="r_name">상품명</td>
                        <td class="r_name">상품가격</td>
                        <td class="r_name">상태</td>
                        <td class="r_name">상세정보</td>
                    </tr>
                    <% result.forEach(function (history, index) { %>
                    <tr>
                        <td><%- history.timestamp %></td>
                        <td><%- history.sellerID %></td>
                        <td><%- history.buyerID %></td>
                        <td><%- history.product %></td>
                        <td><%- history.price %></td>
                        <% if (select != "REPORT" && history.docType == "transaction") { %>
                            <% if (history.details == "match") { %>
                                <td>MATCH</td>
                                <td>-</td>
                            <% } else if (history.details == "cancel") { %>
                                <td>CANCEL</td>
                                <td>-</td>
                            <% } else if (history.details == "finish") { %>
                                <td>FINISH</td>
                                <td>-</td>
                            <% } %>
                        <% } else if (select != "TRANSACTION" && history.docType == "report") { %>
                            <td>REPORT</td>
                            <td><%- history.details %></td>
                        <% } %>
                    </tr>
                    <% }) %>
                </tbody>
            </table>
        </div>
    </div>


    <script src="/styles/bootstrap4/popper.js"></script>
    <script src="/styles/bootstrap4/bootstrap.min.js"></script>
    <script src="/plugins/greensock/TweenMax.min.js"></script>
    <script src="/plugins/greensock/TimelineMax.min.js"></script>
    <script src="/plugins/scrollmagic/ScrollMagic.min.js"></script>
    <script src="/plugins/greensock/animation.gsap.min.js"></script>
    <script src="/plugins/greensock/ScrollToPlugin.min.js"></script>
    <script src="/plugins/OwlCarousel2-2.2.1/owl.carousel.js"></script>
    <script src="/plugins/Isotope/isotope.pkgd.min.js"></script>
    <script src="/plugins/easing/easing.js"></script>
    <script src="/plugins/parallax-js-master/parallax.min.js"></script>
</body>

</html>